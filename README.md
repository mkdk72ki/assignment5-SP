# assignment5-SP

## 概要
第5回の授業にて提示された特別課題です。  
HTTPにまつわる単語について調べたことをまとめています。

<br>

## URL　
*Uniform Resource Locator*の略で、インターネット上のホームページやファイルの位置、情報を示す技術方式。  
`http://`や`https://`から始まり、その後にドメイン名が続く形で構成される。  
主な活用方法として、リンク共有やブックマーク、SEO(検索エンジンの最適化)がある。  
ページやファイルを消したり検索エンジンの検索結果から消すことは可能だが、URL自体を消すことはできない。  

<details><summary>追記</summary>

<dl>
  <dt>短縮URL</dt>
  <dd>元の長いURLを短くしたもの。入力すると元のURLに繋がるようリダイレクトされる。ドメイン等が分からないため、偽装サイトに悪用されるケースもある。</dd>
  <dt>URI</dt>
  <dd><i>Uniform Resource Identifier</i>の略。HTTPの宛先対象となるリソースを一意に識別する値。ほぼURLと同じ。
</dd>

</details>

<br>

## クエリ[^1]文字列
URLパラメーター[^2]、クエリストリングとも呼ばれる、サーバーに情報を送るためにURLの末尾に付け足す文字列。  
`?パラメーター1 = 値1 & パラメーター2 = 値2`というように表記される。  
**パッシブパラメーター**と**アクティブパラメーター**の2種類が存在する。

[^1]:クエリ…検索条件。英語で問い合わせる、訪ねるの意。  
[^2]:パラメーター…変数。数字や文字などの値を入れられる領域。


| パッシブパラメーター | アクティブパラメーター |
----|---- 
| 表示されるコンテンツに影響が出ない。<br>**ユーザーの流入元を知るため**に固有のパラメーターをつけて計測、分析する。<br>主に**Webサイトのアクセス解析**などに利用される。 | 表示されるコンテンツに影響を与える。<br>パラメーターを付け加えて**Webサイトの表示内容を変更**する。<br>ショッピングサイトの**商品のフィルタリングや並び替え**などに利用される。 |

### 注意点

- 標準的なパラメーターを使用する。  
`;`や`,`、`[]`などの非標準パラメータを使用すると、検索エンジンにうまく読み取ってもらえない可能性がある。

- `?`は頭部分の**一度だけ**に使用する。  
	2つ以上使用するとURLが正常に機能しなくなってしまう。
  
- ページ内リンクは**一番後ろ**に設置する。  
	リンクを使用する場合は`URL + ?パラメーター + #ページ内リンク`と表記する。
	誤るとリンクが作動しなくなってしまう。

<br>

## パス[^3]パラメーター

ファイルシステム上のロケーションを指定するもの。  
特定のものを表示したいとき、特定のリソースを識別するために必要な情報。  
表示のベースとなるWebページを指定する。  
必ず必要なもので、省略はできない。

[^3]:パス(PATH)…ファイルやフォルダに置いてある場所。

  
### クエリ文字列とパスパラメーターの比較 

- どちらもフロントエンドからバックエンドへ値を渡す手法。
  
| クエリ文字列 | パスパラメーター |
----|---- 
| オプションを指定するために使用。<br>省略可。 | 特定のものを指定するために使用。<br>省略不可。 |

<br>

## HTTPメソッド
クライアントがサーバーのリソースに対して実行したいことを示す手段。  
HTTPリクエストの中のリクエストラインの中に書かれる。

| メソッド | 用途 |
| :---: | --- | 
| GET | 指定したリソース情報を**取得**する。 WebページやAPI経由データ、画像などの取得。 |
| POST | 新しいリソース情報を**送り込む**。サーバー上の状態を変更する。新規作成などに利用。<br>フォームデータなど、データをセットで渡す。クライアントからサーバーへデータを送信する。 |
| PUT | リソース情報を新しい情報に**置き換える**。クライアントからサーバーへデータを送信する。更新に利用。 |
| PATCH | リソースを**部分的に変更**する。 |
| DELETE | リソースを**削除**する。 |

<br>

## HTTPステータスコード
HTTPレスポンスの一番上のステータスラインで表示される3桁の番号。  
サーバーの情報処理の結果を表すもの。

| ステータスコード | 内容 | 意味 |
 :---: | :---: | ---
| 100番台 | Informational(情報レスポンス) | 処理中だが、クライアントからのリクエストを受け入れ可能な状態。 |
| 200番台 | Success(成功) | クライアントからサーバーに送られたリクエストが理解され、受理された状態。リクエストに応じてサーバー側で処理をし、クライアントにレスポンスを返す。<br><br>**200 OK：リクエストが正常に処理できた**<br>**201 Created：リクエストが成功し、リソースが新たに作られた** |
| 300番台 | Redirection(リダイレクト) | リクエストを完了させるために追加的な処理が必要な状態。 |
| 400番台 | Client Error(クライアントエラー) | クライアント(ユーザー)側で操作や入力に不備があった際に出るエラー。<br><br>**400 Bad Request：一般的なクライアントエラー、不正なリクエスト**<br>**404 Not Found：Webページが見つからない** |
| 500番台 | Server Error(サーバーエラー) | サーバー側にエラーがある際に出るエラー。クライアント側は復旧まで何もできない。<br><br>**500 Internal Server Error：サーバー内で起きた何らかのエラー** |

<details><summary>追記</summary>

<dl>
  <dt>ソフト404エラー</dt>
  <dd>ブラウザでは404の内容で表示されるが、ステータスコードでは200と表示されている状態。</dd>
  <dt>000、0というステータスコードは存在しない</dt>
  <dd>　表示された場合は、Networkライブラリのバグ、ローカルファイルでHTMLを開いて実行した、サーバーリクエストを送った際にサーバーが落ちていた、などの可能性がある。
</dd>

</details>

<br>

## HTTPリクエスト
リクエストライン、リクエストヘッダー、(空行、)リクエストメッセージボディで構成されている。

![image](https://github.com/mkdk72ki/assignment5-SP/assets/143886913/f1ce0e79-2151-4f7d-850d-4f4b69b58d8d)



### リクエストヘッダー
HTTPリクエストの前半にある、**取得するリソースやクライアント自体に関する詳細情報**を含む領域。  
メッセージや本文の内容を変更したり、より詳細に説明するための追加情報を渡す。大文字、小文字は区別しない。  
行の先頭から始まり、`フィールド名：内容`という形で表記され、改行で区切って列挙した形式で記述される。  

| フィールド名 | 内容 |
----|---- 
| Host | 送信先のドメイン名とポート番号、接続先のホスト名 |
| Referer | 参照元ページのURL。アクセス解析やサイト分析に使用される |
| User-Agent | クライアントソフトウェアの識別名。ブラウザの種類やバージョン、OS |
| Cookie | ブラウザ側に保存されたサイトデータをサーバーへ送信する |
| Authorization | ログインに必要な認証データ |
| Accept | 受信可能なデータのMIMEタイプ |
| If-Modified-Since | 指定した日付以降に更新されていたらデータ送信を要求する |
| X-Forwarded-For | プロキシサーバー経由でWebサーバーへ接続する際に使用。<br>正確な接続元IPアドレスをサーバーへ送信する |  

<details><summary>補足</summary>

 表示されるヘッダーには、`Date`などのリクエストメッセージと共通の**一般ヘッダー**や、`Content-Length`などのボディ部のコンテンツについての情報を示した**エンティティヘッダー**というものも含まれている。
　　

</details>

### リクエストボディ
リクエストメッセージの本文部分。クライアントが**サーバーに送信したいデータ**を含めることができる。  
主に*POST、PUT*などのリクエストメッセージで使用される。  

#### ヘッダーとボディの比較

|  | 位置 | 内容 | 形式 | サイズ | 利用方法 |
:---: |--- | --- | --- | --- | --- 
| ヘッダー | リクエストの先頭部分 | リクエストのメタデータを含む<br>(ホスト名、`Accept-Encode`など) | キーと値 | 比較的小さい | ほとんどのリクエストがヘッダーを利用 |
| ボディ | リクエストヘッダーの後 | リクエストの本文データを含む<br>(POSTデータ、ファイルアップデートデータ) | 任意のデータ形式<br>(実際のバイナリデータをそのまま含めることが可能) | 任意のサイズデータにできる | 必要なときのみ利用<br>(GETなど) |
  
- クライアントブラウザからAPIにデータを送る必要がある場合、データをボディとして送る

<br>

## HTTPレスポンス
ステータスライン、レスポンスヘッダー、(空行、)レスポンスボディで構成されている。

![aaa](https://github.com/mkdk72ki/assignment5-SP/assets/143886913/d29eb7cd-3f76-4fc2-ba16-09cbf8397b45)


### レスポンスヘッダー
HTTPレスポンスの前半にある、ステータスラインに対する**レスポンスの付加情報**が記述されている部分。  
`フィールド名：内容`という形で表記され、改行で区切って列挙した形式で記述される。

| フィールド名 | 内容 |
----|---- 
| Location | リダイレクト先のURL<br>(ステータスコード:201、300番台) |
| Server | Webサーバーソフトウェアの識別名 |
| Age | プロキシのキャッシュに存在する時間 |
| Set-Cookie | ブラウザ側にサイトデータを保持 |
| Vary | 文字コードなど複数の選択肢がある場合にサーバーが選択し通知 |
| Proxy-Authenticate | クライアントにプロキシの認証を要求<br>(ステータスコード:407) |


### レスポンスボディ
HTMLの中身。リクエストに対するサーバーの**応答内容の本文**で、主にHTML形式のテキストデータが含まれる。  
返却するコンテンツがそのまま格納される。

<br>

## JSON
*Java Script Object Notaion*の略。JavaScriptのオブジェクト表記法に由来するデータの記述方式。  
**データ構造が単純**なため人間が一目見ただけで理解ができる上、**決まった形式に沿って記述**されているためコンピューター側にとっても読み込みや加工のしやすい様式。  
JavaScriptはもちろんC言語やJava、Pythonなど多くのプログラミング言語で広く活用されており、**特定の言語に依存しない便利なフォーマット**として認識されている。  

- JavaScriptフロントエンドの普及に伴い、バックエンドと通信する際のフォーマットとして利用される。<br>また、REST APIなどではJSON形式でデータを規制することでデータの受け渡しや転送を行っている。
  
- フロントエンド上で操作するJavaScriptでデータを保持するなど、ユーザー生成データの一時保存にも利用される。  <br>Javaのインスタンスのように扱えるため、ユーザーの入力情報や保持する必要のあるデータを一時的に保管することが可能。  

- JavaScriptにはJSONオブジェクトやJSON配列が存在し、定義するだけで認識される。<br>Javaで扱う場合は、**Jackson**、**Gson**、**JSON in Java**などのJSONを扱うライブラリを利用する。  

- `{"Key" : "Value"}` 、 `{"Key1" : "Value1" , "Key2" : "Value2" , …}`と表記する。<br>改行やインデントを使用でき、配列の表現や入れ子形式も可能。  

<br>

| データ型 | 表記方法 |
:-: | - 
| 文字列 | `""`で囲む |
| 数値 | そのまま表記 |
| bool値 | true/false。そのまま表記 |
| 配列 | `[]`で囲む。カンマで複数表記することも可能 |
| null | 該当する値がない場合に使用。そのまま表記 |

(例)
```JSON

{
    "name": "yamada",
    "info": {
        "id": null,
        "age": 16,
        "class_name": "A",
    }
}

```

<details><summary>補足</summary>

以前はCSV(Comma Separated Values)[^4]やXML(Extensible Markup Language)[^5]が一般的だった。

</details>

[^4]:CSV…主にデータ交換用の汎用フォーマットとして利用。`A,B,C...`のように各項目をカンマで区切って表記する。
[^5]:XML…マークアップ言語として定義されたフォーマット。`<form><name>A</name>...</form>`のようにタグを用いて項目を定義し、タグの中に値を記載する。

### メリット
<dl>
<dt>開発コスト、メンテナンスコストの削減</dt>
<dd>テキスト形式なので軽く、どんな環境でも利用しやすい。<br>テキストエディタさえあればデータの作成や修正が可能なため特別なソフトも不要。<br>記述方式がシンプルで誰にでも扱いやすいため、学習コストも抑えられる。</dd>
  
<dt>自由度の高いフォーマット</dt>
<dd>テキスト形式ではあるが、複雑な構造を簡単に表せる。<br>必要に応じてデータの追加や削除が可能で修正が容易。</dd>

### 注意点
<dl>
<dt>柔軟なデータ構造を作れる半面、複雑な構造も簡単に生まれてしまう</dt>
<dd>配列、オブジェクトを多用してしまうと、読み込むときに繰り返し処理や入れ子データを読み込む回数が増加するため、処理時間が伸びコンピューター全体が重くなってしまう。<br>得意分野によってほかのデータ形式と使い分けたり、組み合わせて利用するのが望ましい</dd>

<dt>指定されたデータ形式の純粋な文字列である</dt>
<dd>プロパティのみを含むことができ、メソッドは含むことができない。<br>また、カンマ、コロンが１つ抜けるだけでもファイルが無効になり、動作しなくなってしまう。<br>妥当性を検証できる、JSONLintのようなアプリケーションを利用するとよい</dd>

<dt>表計算ソフトで処理したい場合は向いていない</dt>

<br>
